---
lab:
  title: Использование беседных Распознавание речи с Language Studio
---

# Использование беседных Распознавание речи с Language Studio

Все чаще мы ожидаем, что компьютеры смогут использовать ИИ, чтобы понять команды естественного языка, произнесенные или типизированные. Например, может потребоваться, чтобы система автоматизации дома управляла устройствами в вашем доме с помощью голосовых команд, таких как "включить свет" или "поместить вентилятор". Устройства, на основе искусственного интеллекта, могут понять эти команды и принять соответствующие меры.

В этом упражнении вы будете использовать Language Studio для создания и тестирования проекта, который отправляет инструкции на устройства, такие как свет или вентиляторы. Вы будете использовать возможности службы беседы Распознавание речи для настройки проекта. 

## Создание ресурса *Языковой службы*

Вы можете использовать множество функций языка ИИ Azure с ресурсом служб искусственного интеллекта Azure или **языком****.** Существуют некоторые экземпляры, в которых можно использовать только ресурс языка. В приведенном ниже упражнении мы будем использовать **ресурс языка** . Если вы еще этого не сделали, создайте ресурс **Языковой службы** в своей подписке Azure.

1. На другой вкладке браузера откройте портал Azure, [https://portal.azure.com](https://portal.azure.com?azure-portal=true)выполнив вход с учетной записью Майкрософт, связанной с вашей подпиской Azure.

1. **Щелкните &65291; Создайте кнопку ресурса** и найдите *языковую службу*. Выберите **Создать** план службы** языка<a1/a0**>. Вы перейдете на страницу, чтобы *Выбрать дополнительные функции**. Сохраните выбор по умолчанию и нажмите кнопку **"Продолжить", чтобы создать ресурс**. 

1. На странице **создания языка** настройте его с помощью следующих параметров:
    - **Подписка**: *ваша подписка Azure*.
    - **Группа ресурсов**: *выберите существующую или создайте новую группу ресурсов с уникальным именем*.
    - **Регион**: *выберите ближайший географический регион. Если в восточной части США, используйте "Восточная часть США 2".*
    - **Имя**: *укажите уникальное имя*.
    - **Ценовая категория**: *бесплатный F0 или S, если бесплатная F0 недоступна*
    - **Установив этот флажок, я признаю, что я прочитал и понял все приведенные ниже** термины: *Выбрано*.

1. Нажмите кнопку **"Рецензирование" и "****Создать**" и дождитесь завершения развертывания.


### Создание приложения Распознавания диалогового языка

Чтобы реализовать распознавание естественной речи с помощью Распознавания диалоговой речи, создайте приложение. Затем добавьте в него сущности, намерения и речевые фрагменты, чтобы задать команды, которые должно выполнять ваше приложение.

1. В новой вкладке браузера откройте портал Language Studio по адресу [https://language.azure.com](https://language.azure.com?azure-portal=true) и войдите в него с учетной записью Майкрософт, связанной с вашей подпиской Azure.

1. При появлении запроса на выбор языкового ресурса выберите следующие параметры:
    - **Каталог Azure: *каталог** Azure, содержащий подписку*.
    - **Подписка Azure: *ваша подписка*** Azure.
    - **Ресурс** языка: *созданный ранее ресурс языка.*

   Если вам ***не*** предлагается выбрать языковой ресурс, это может быть вызвано тем, что в подписке имеется несколько языковых ресурсов. В этом случае:
    1. На панели в верхней части страницы выберите **"Параметры" (&9881;)**.
    2. На странице **Параметры** перейдите на вкладку **Ресурсы**.
    3. Выберите только что созданный ресурс языка и выберите **ресурс** Switch.
    4. В верхней части страницы выберите **Language Studio** , чтобы вернуться на домашнюю страницу Language Studio.

1. В верхней части портала в меню **Создать** выберите пункт **Распознавание устной речи**.

1. **В диалоговом окне "Создание проекта**" на **странице "Ввод основных сведений**" введите следующие сведения и нажмите кнопку **"Далее**".
    - **Имя**: *укажите уникальное имя*
    - **Основной язык** речевых фрагментов: *английский*
    - **Включить несколько языков в проекте**: *не выбирайте этот параметр*.
    - **Description** (Описание): `Simple home automation`

    > **Совет.** Запишите имя* проекта*, используйте его позже.

1. **На странице "Проверка и завершение**" нажмите кнопку **"Создать**".

### Создание намерений, речевых фрагментов и сущностей

*Намерение* — это действие, которое необходимо выполнить (например, включить свет или выключить вентилятор). В этом случае вы определите два намерения: одно для включения устройства, а другое для его выключения. Для каждого намерения вы укажете пример *речевого фрагмента* — формулировку, используемую для указания намерения.

1. **В области определения** схемы убедитесь, что **намерения выбраны**, а затем нажмите кнопку **"Добавить**" и добавьте намерение с именем `switch_on` (в нижнем регистре) и нажмите кнопку **"Добавить намерение**".

    ![Выберите пункт "Намерения" на панели "Схема сборки".](media/conversational-language-understanding/build-schema.png)

    ![Добавление намерения switch_on и нажатие "Добавить намерение".](media/conversational-language-understanding/add-intent.png)

1. Выберите намерение **switch_on**. Откроется страница **Маркировка данных**. В раскрывающемся списке **Намерение** выберите **switch_on**. Рядом **с намерением switch_on** введите речевой `turn the light on` фрагмент и нажмите клавишу **ВВОД** , чтобы отправить это высказывание в список.

    ![Добавьте речевой фрагмент в обучающий набор. Для этого введите "включить освещение" в поле "Речевой фрагмент".](media/conversational-language-understanding/add-utterance-on.png)

1. Языковой службе требуется не менее пяти различных примеров речевых фрагментов для каждого намерения, чтобы правильно обучить языковую модель. Добавьте для намерения **switch_on** еще пять примеров речевых фрагментов:  
    - `switch on the fan`
    - `put the fan on`
    - `put the light on`
    - `switch on the light`
    - `turn the fan on`

1. В области **Метки сущностей для обучения** с правой стороны экрана выберите **Метки**, а затем — **Добавить сущность**. Введите `device` (в нижнем регистре), выберите "Список **" и выберите **"**Добавить сущность**".

    ![Добавление сущности: выбор тегов на панели "Сущности тегов для обучения" и нажатие кнопки "Добавить сущность".](media/conversational-language-understanding/add-entity.png)

    ![Ввод слова "устройство" в поле "Имя сущности", выбор вкладки "Список" и нажатие кнопки "Добавить сущность".](media/conversational-language-understanding/add-entity-device.png)

1. В речевом фрагменте ***включи вентилятор*** выделите слово "вентилятор". В открывшемся списке в поле *Поиск сущности* выберите **device**.

    ![Выделите слово "вентилятор" в речевых фрагментах и выберите устройство.](media/conversational-language-understanding/switch-on-entity.png)

1. Сделайте то же самое для всех высказываний. Укажите для остальных речевых фрагментов *вентилятор* или *свет* метку сущности **устройство**. По завершении убедитесь в наличии следующих речевых фрагментов и обязательно выберите **Сохранить изменения**:

    | **намерение** | **речевой фрагмент** | **сущность** |
    | --------------- | ------------------ | ------------------ |
    | switch_on   | Включи вентилятор      | Device - *select fan* |
    | switch_on   | Включи свет    | Device - *select light* |
    | switch_on   | Включить свет | Device - *select light* |
    | switch_on   | Включить вентилятор     | Device - *select fan* |
    | switch_on   | Включай вентилятор   | Device - *select fan* |
    | switch_on   | Включи освещение   | Device - *select light* |

    ![Обязательно нажмите кнопку "Сохранить", если все готово.](media/conversational-language-understanding/save-changes.png) 

1. В области слева выберите **определение** схемы и убедитесь, что **** switch_on намерение указано. Затем выберите **"Добавить** " и добавьте новое намерение с именем `switch_off` (в нижнем регистре).

    ![Вернитесь на экран схемы сборки и добавьте намерение switch_off.](media/conversational-language-understanding/add-switch-off.png) 

1. **Выберите намерение switch_off**. Откроется страница **Маркировка данных**. В раскрывающемся списке **Намерение** выберите **switch_off**. Рядом с намерением **switch_off** добавьте высказывание `turn the light off`.

1. Добавьте для намерения **switch_off** еще пять примеров речевых фрагментов.
    - `switch off the fan`
    - `put the fan off`
    - `put the light off`
    - `turn off the light`
    - `switch the fan off`

1. Укажите для слов *свет* или *вентилятор* метку сущности **устройство**. По завершении убедитесь в наличии следующих речевых фрагментов и обязательно выберите **Сохранить изменения**:  

    | **намерение** | **речевой фрагмент** | **сущность** | 
    | --------------- | ------------------ | ------------------ |
    | switch_off   | Выключи вентилятор    | Device - *select fan* | 
    | switch_off   | Выключи освещение  | Device - *select light* |
    | switch_off   | Выключить свет | Device - *select light* |
    | switch_off   | Выключить вентилятор | Device - *select fan* |
    | switch_off   | Выключите вентилятор | Device - *select fan* |
    | switch_off   | Отключить свет | Device - *select light* |

### Обучение модели

Теперь вы готовы к использованию целей и сущностей, заданных для обучения модели интерактивного взаимодействия для приложения.

1. В Language Studio слева выберите **Задания обучения** и нажмите **Начать задание обучения**. Используйте следующие параметры:
    - **Обучить новую модель**: *выбрано с указанием имени модели*.
    - **Режим обучения**: стандартное обучение (бесплатно)
    - **Разделение данных**: *выберите "Автоматически отделить набор тестирования от обучающих данных", сохраните проценты по умолчанию*
    - Выберите **"Обучение** " в нижней части страницы.

1. Дождитесь завершения обучения.

### Развертывание и тестирование модели

Чтобы использовать обученную модель в клиентском приложении, необходимо развернуть ее в качестве конечной точки, куда клиентские приложения смогут отправлять новые речевые фрагменты, на основе которых будут прогнозироваться намерения и сущности.

1. В левой части Language Studio выберите **"Развернуть модель**".

1. Выберите имя модели и **добавьте развертывание**. Используйте следующие параметры.
    - **Создайте или выберите существующее имя развертывания**: *выберите создание имени развертывания. Укажите уникальное имя*.
    - **Назначьте обученную модель имени развертывания**: *выберите имя обученной модели*.
    - Выберите **Развернуть**.

    > **Совет.** Обратите внимание на *имя* развертывания, используйте его позже. 

1. При развертывании модели выберите **"Тестирование развертываний" в левой части страницы** и выберите развернутую модель в **имени** развертывания.

1. Введите следующий текст и нажмите кнопку **Запустить тест**:

    `switch the light on`

    ![Проверка модели: выбор развернутой модели, ввод текста и нажатие кнопки "Запустить тест".](media/conversational-language-understanding/test-model.png) 

    Проверьте возвращаемый результат, отметив, что он включает прогнозируемое намерение (которое должно быть **switch_on**) и прогнозируемую сущность (**device**) с показателями достоверности, указывающими вероятность, которую модель вычисляет для прогнозируемого намерения и сущности. На вкладке JSON показана сравнительная достоверность для каждого потенциального намерения (с наивысшим показателем достоверности соответствующим прогнозируемому намерению).

1. Очистите текстовое поле и проверьте модель, указав следующие речевые фрагменты в поле *Введите текст или загрузите текстовый документ*:
    - `turn off the fan`
    - `put the light on`
    - `put the fan off`

Теперь вы успешно настроили проект языка общения и определили сущности, намерения и речевые фрагменты. Вы видели, как обучить и развернуть модель в Языковой студии. И вы пробовали его с обоими речевыми фрагментами, которые вы определили, и некоторые, которые вы не определили явно, но модель была в состоянии определить.

> **ПРИМЕЧАНИЕ**. Распознавание речи беседы обеспечивает интеллект для интерпретации намерения входных данных; он не выполняет никаких действий, таких как включение света или вентилятора. Разработчику потребуется создать приложение, использующее модель беседы Распознавание речи для определения намерения пользователя, а затем автоматизировать соответствующее действие.

## Очистка

Если вы не собираетесь выполнять больше упражнений, удалите все ресурсы, которые больше не нужны. Это позволяет избежать каких-либо ненужных затрат.

1.Откройте [портал Azure]( https://portal.azure.com) и выберите группу ресурсов, содержащую созданный ресурс. 1.Выберите ресурс и нажмите кнопку **"Удалить** ", а затем **"Да** ", чтобы подтвердить. Затем ресурс удаляется.

## Подробнее

Это приложение реализует лишь некоторые возможности функции "Распознавание устной речи" языковой службы. Дополнительные сведения о том, что можно сделать с помощью этой службы, см. на [этой странице](https://docs.microsoft.com/azure/cognitive-services/language-service/conversational-language-understanding/overview).
