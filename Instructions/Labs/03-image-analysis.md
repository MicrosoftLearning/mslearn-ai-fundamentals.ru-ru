---
lab:
  title: Анализ изображений на портале Azure AI Foundry
---

# Анализ изображений на портале Azure AI Foundry

**Azure AI Vision** включает множество возможностей для понимания содержимого изображения и контекста и извлечения информации из изображений. В этом упражнении вы будете использовать Azure AI Vision на портале Azure AI Foundry, платформе Майкрософт для создания интеллектуальных приложений, чтобы проанализировать изображения с помощью встроенных возможностей. 

Предположим, вымышленный розничный торговец *Northwind Traders* решил реализовать "смарт-магазин", в котором службы ИИ отслеживают магазин для выявления клиентов, требующих помощи, и прямых сотрудников, чтобы помочь им. С помощью Azure AI Vision изображения, сделанные камерами в магазине, можно проанализировать, чтобы предоставить значимые описания того, что они изображают.

## Создание проекта на портале Azure AI Foundry

Начнем с создания проекта Azure AI Foundry.

1. В веб-браузере откройте [портал](https://ai.azure.com) `https://ai.azure.com` Azure AI Foundry и войдите с помощью учетных данных Azure. Закройте все советы или панели быстрого запуска, открываемые при первом входе, и при необходимости используйте **логотип Azure AI Foundry** в левом верхнем углу, чтобы перейти на домашнюю страницу, которая выглядит следующим образом (закройте **панель справки** , если она открыта):

    ![Снимок экрана: домашняя страница Azure AI Foundry с выбранным агентом.](./media/azure-ai-foundry-home-page.png)

1. На домашней странице выберите + **Создать агент**.

1. В мастере **создания агента** введите допустимое имя проекта. 

1. Выберите **дополнительные параметры** и укажите следующие параметры:
    - **Ресурс** Azure AI Foundry: *сохраните имя по умолчанию*
    - **Подписка**: *ваша подписка Azure*
    - **Группа** ресурсов. *Создание или выбор группы ресурсов*
    - **Регион**: выберите одно из следующих расположений:
        * Восточная часть США
        * Центральная Франция
        * Республика Корея, центральный регион
        * Западная Европа
        * западная часть США

1. Нажмите кнопку **"Создать** " и просмотрите конфигурацию. Дождитесь завершения процесса настройки.

    >**Примечание**. Если вы получили ошибку разрешений, нажмите **кнопку "Исправить"** , чтобы добавить соответствующие разрешения для продолжения.

1. При создании проекта вы будете доставлены по умолчанию в playfround агентов на портале Azure AI Foundry, который должен выглядеть следующим образом:

    ![Снимок экрана: сведения о проекте ИИ Azure на портале Azure AI Foundry.](./media/ai-foundry-project-2.png)
 
1. В новом окне браузера откройте страницу [](https://ai.azure.com/explore/aiservices)изучения служб ИИ Azure.

1. *На странице "Службы* искусственного интеллекта" выберите плитку *"Визуальное распознавание и документ*", чтобы попробовать возможности Azure AI Vision и Document.

## Создание подписей для изображения

Давайте используем функцию подписи изображений Azure AI Vision для анализа изображений, сделанных камерой в *магазине Northwind Traders* . Заголовки изображений доступны с помощью **функций субтитров** и **плотных субтитров** .

1. *На странице "Зрение и документ*" прокрутите вниз и выберите **"Изображение**" в разделе *"Просмотр всех других возможностей визуального* зрения". Затем выберите плитку **"Заголовок** изображения".

    ![Снимок экрана: плитка заголовка изображения в разделе изображения страницы "Зрение и документ".](./media/vision-image-captioning-tile.png)

1. **На странице "Добавление подписей к изображениям**" просмотрите ресурс, к которому вы подключены подзаголовок **Try It Out**. Вам не нужно вносить изменения. (*Примечание.* Если вы не настроили допустимое расположение ресурсов во время создания ресурса, вам может потребоваться создать новый ресурс служб искусственного интеллекта Azure, который находится в допустимом регионе. Вам потребуется создать новый ресурс, чтобы продолжить работу с лабораторией.)  

1. Выберите[**https://aka.ms/mslearn-images-for-analysis](https://aka.ms/mslearn-images-for-analysis)**, чтобы скачать **image-analysis.zip.** Откройте папку на компьютере и найдите файл с именем **store-camera-1.jpg**; который содержит следующее изображение:

    ![Изображение родителя, снимающего ребенка в магазине на камеру сотового телефона](./media/analyze-images-vision/store-camera-1.jpg)

1. **Отправьте изображение store-camera-1.jpg**, перетащив его в **поле перетаскивания или** перейдя к нему в файловой системе.

1. Просмотрите созданный текст заголовка, видимый на **панели обнаруженных атрибутов** справа от изображения.

    Функция **субтитров** предоставляет одно удобочитаемое на английском языке предложение, описывающее содержимое изображения.

1. Затем используйте то же изображение для выполнения **плотной подписи**. Вернитесь на **страницу "Визуальное и документирование** ", выбрав *стрелку назад* в верхней части страницы. *На странице "Визуальное и документирование*" выберите **вкладку "Изображение**", а затем щелкните плитку **"Плотная подпись**".

    Функция **"Плотные подписи" отличается от **возможности субтитров****, в том, что она предоставляет несколько подписей, доступных для чтения для изображения, один из которых описывает содержимое изображения и другие, каждый из которых охватывает основные объекты, обнаруженные на рисунке. Каждый обнаруженный объект включает ограничивающий прямоугольник, который определяет координаты пикселей в изображении, связанном с объектом.

1. Наведите указатель мыши на один из подписей в **списке обнаруженных** атрибутов и просмотрите, что происходит в изображении.

    ![Отображаются изображения и его подписи.](./media/analyze-images-vision/dense-captioning.png)

    Переместите курсор мыши на другие подписи в списке и обратите внимание, как ограничивающий прямоугольник сдвигается на изображении, чтобы выделить часть изображения, используемую для создания заголовка.

## Добавление тегов к изображениям 

Следующая функция, которая будет пытаться, — *это функция извлечения тегов* . Извлечение тегов основано на тысячах узнаваемых объектов, включая живые существа, пейзажи и действия.

1. Вернитесь на *страницу "Визуальное и документ"* в Azure AI Foundry, а затем перейдите **на вкладку "Изображение** " и выберите плитку **извлечения** общих тегов.

1. Откройте папку, содержащую скачанные изображения и найдите файл с именем **store-image-2.jpg**, который выглядит следующим образом:

    ![Изображение человека с корзиной для покупок в супермаркете](./media/analyze-images-vision/store-camera-2.jpg)

1. **Отправьте файл store-camera-2.jpg**.

1. Просмотрите список тегов, извлеченных из изображения, и оценку достоверности для каждой из обнаруженных атрибутов. Здесь оценка достоверности — это вероятность того, что текст для обнаруженного атрибута описывает то, что на самом деле находится на изображении. Обратите внимание на список тегов, которые он включает не только объекты, но и действия, такие как *покупки*, *продажи* и *стояние*.

    ![Снимок экрана: панель "Обнаружение атрибутов" в Студии визуального распознавания с текстом и оценками достоверности, отображаемыми рядом с исходным изображением.](./media/analyze-images-vision/detect-attributes.png)

## Обнаружение объектов

В этой задаче используется **функция обнаружения** объектов анализа изображений. Обнаружение объектов обнаруживает и извлекает ограничивающие прямоугольники на основе тысяч узнаваемых объектов и живых существ.

1. Вернитесь на *страницу "Распознавание и документ"* в Azure AI Foundry, а затем перейдите на **вкладку "Изображение** " и выберите плитку **"Общее обнаружение** объектов".

1. Откройте папку, содержащую скачанные изображения и найдите файл с именем **store-camera-3.jpg**, который выглядит следующим образом:

    ![Изображение человека с тележкой для покупок](./media/analyze-images-vision/store-camera-3.jpg)

1. **Отправьте файл store-camera-3.jpg**.

1. **В поле "Обнаруженные атрибуты"** просмотрите список обнаруженных объектов и их оценки достоверности.

1. Наведите указатель мыши на объекты в списке **обнаруженных атрибутов** , чтобы выделить ограничивающий прямоугольник объекта на изображении.

1. **Переместите ползунок порогового значения**, пока не появится значение 70 справа от ползунка. Просмотрите, что происходит с объектами в списке. Ползунок порогового значения указывает, что должны отображаться только объекты, идентифицированные с оценкой достоверности или вероятностью, превышающей пороговое значение.

## Очистка

Если вы не собираетесь выполнять больше упражнений, удалите все ресурсы, которые больше не нужны. Это позволяет избежать каких-либо ненужных затрат.

1.  [Откройте портал Azure]( https://portal.azure.com) и выберите группу ресурсов, содержащую созданные ресурсы. 
1.  Выберите ресурс и нажмите кнопку **"Удалить** ", а затем **"Да** ", чтобы подтвердить. Затем ресурс удаляется.

## Подробнее

Дополнительные сведения о том, что можно сделать с этой службой, см. на [странице](https://learn.microsoft.com/azure/ai-services/computer-vision/overview) "Распознавание искусственного интеллекта Azure".
