---
lab:
  title: Использование ответов на вопросы в Language Studio
---

# Использование модели ответов на вопросы в Language Studio

В этом упражнении вы будете использовать Language Studio для создания и обучения база знаний вопросов и ответов, которые будут использоваться ботом служб клиентов. Содержимое для база знаний будет поступать с существующей страницы часто задаваемых вопросов с веб-сайта Margie's Travel, вымышленного туристического агентства. Затем вы будете использовать Language Studio, чтобы узнать, как он будет работать при использовании клиентами.

При реализации бота сначала необходимо создать база знаний пар вопросов и ответов. Это используется вместе со встроенными возможностями обработки естественного языка, чтобы бот может интерпретировать вопросы и находить наиболее подходящий ответ для пользователя.

Язык ИИ Azure включает *возможности ответа на* вопросы, которые будут использоваться для создания база знаний. Базы знаний можно создать либо путем ввода пар вопросов и ответов вручную, либо из существующего документа или веб-страницы. Margie's Travel хочет использовать существующий документ часто задаваемых вопросов.

Функция ответа на вопросы службы языка позволяет быстро создавать база знаний, вводя пары вопросов и ответов или из существующего документа или веб-страницы. Затем для интерпретации вопросов и поиска ответов на них служба использует встроенные возможности обработки естественного языка.

## Создание ресурса *Языковой службы*

Чтобы использовать ответы на вопросы, требуется **ресурс языка** .

1. На другой вкладке браузера откройте портал Azure, [https://portal.azure.com](https://portal.azure.com?azure-portal=true)выполнив вход с учетной записью Майкрософт, связанной с вашей подпиской Azure.

1. **Щелкните &65291; Создайте кнопку ресурса** и найдите *языковую службу*. Выберите **Создать** план службы** языка<a1/a0**>. Вы перейдете на страницу, чтобы **выбрать дополнительные функции**. Используйте следующие параметры:
    - **Выберите дополнительные функции**:
        - **Признаки по умолчанию**: *оставьте признаки по умолчанию*.
        - **Пользовательские признаки**: *выберите настраиваемые ответы на вопросы*.
     - Нажмите кнопку **"Продолжить", чтобы создать ресурс "Создание ресурса**
    ![языковой службы" с включенным настраиваемым ответом на вопросы.](media/create-a-bot/create-language-service-resource.png)

1. На странице **Создание языка** укажите параметры ниже.
    - **Сведения о проекте**
        - **Подписка**: *ваша подписка Azure*.
        - **Группа ресурсов**: *выберите существующую группу ресурсов или создайте новую*.
    - **Сведения об экземпляре**
        - **Регион**: *выбор региона*      
        - **Имя**: *уникальное имя языкового ресурса*.
        - **Ценовая категория**: S (1000 звонков в минуту)
    - **Настраиваемые ответы на вопросы**
        - **Регион Поиска Azure**: *любое доступное расположение*.
        - **Ценовая категория** поиска Azure: Бесплатный F (3 индекса) (*если этот уровень недоступен, выберите "Базовый*")
    - **Уведомление об ответственном искусственном интеллекте**
        - **By checking this box I certify that I have reviewed and acknowledge the terms in the Responsible AI Notice** (Устанавливая этот флажок, я подтверждаю, что мною прочтены и приняты условия уведомления об ответственном применении ИИ): *установлен*.

1. Выберите "Рецензирование" и " **Создать** ", а затем нажмите кнопку **"Создать**". Дождитесь развертывания языковой службы, которая будет поддерживать базу знаний пользовательских ответов на вопросы.

    > **Примечание **Если вы уже подготавливали ресурс **Когнитивного поиска Azure** бесплатной ценовой категории, квота может не позволить вам создать ресурс. В этом случае выберите уровень, отличающийся от **Бесплатного (F)**.

## Создание нового проекта

1. В новой вкладке браузера откройте портал Language Studio по адресу [https://language.azure.com](https://language.azure.com?azure-portal=true) и войдите в него с учетной записью Майкрософт, связанной с вашей подпиской Azure.
1. При появлении запроса на выбор языкового ресурса выберите следующие параметры:
    - **Каталог Azure: *каталог** Azure, содержащий подписку*.
    - **Подписка Azure: *ваша подписка*** Azure.
    - **Ресурс** языка: *созданный ранее* ресурс языка.

    Если вам ***не*** предлагается выбрать языковой ресурс, это может быть вызвано тем, что в подписке имеется несколько языковых ресурсов. В этом случае:
    1. На панели в верхней части страницы выберите **Параметры (&9881;)**.      
    1. На странице **Параметры** перейдите на вкладку **Ресурсы**.
    1. Выберите только что созданный ресурс языка и выберите **ресурс** Switch.
    1. В верхней части страницы выберите **Language Studio** , чтобы вернуться на домашнюю страницу Language Studio.

1. В верхней части портала Language Studio в меню **Создать** выберите **Пользовательские ответы на вопросы**.

    ![Настраиваемые ответы на вопросы](media/create-a-bot/create-custom-question-answering.png)

1. На странице **Выбор параметра языка для ресурса *ваш ресурс*** задайте **I want to select the language when I create a project in this resource** (Я хочу выбрать язык при создании проекта в этом ресурсе) и нажмите **Далее**.
  ![Я хочу выбрать язык](media/create-a-bot/create-project.png)

1. На странице **Ввод основных сведений** введите следующие сведения и нажмите кнопку **Далее**:
    - **Языковой ресурс**: *выберите свой языковой ресурс*.  
    - **Ресурс Поиска Azure**: *выберите ресурс службы "Поиск Azure"*.
    - **Имя**: `MargiesTravel`
    - **Description** (Описание): `A simple knowledge base`
    - **Исходный язык**: английский
    - **Ответ по умолчанию, если ответ не возвращается**: `No answer found`
1. **На странице "Проверка и завершение**" нажмите кнопку **"Создать проект**".
1. Вы перейдете на страницу **Управление источниками**. Выберите **&65291; Добавьте источник** и выберите **URL-адреса**.
1. **В поле "Добавить URL-адреса"** нажмите кнопку **+Добавить URL-адрес**. Введите следующий адрес и нажмите **Добавить все**:
    - **Имя** URL-адреса: `MargiesKB`
    - **URL-адрес**: `https://raw.githubusercontent.com/MicrosoftLearning/mslearn-ai-fundamentals/main/data/natural-language/margies_faq.docx`
    - **Классификация структуры файлов**: *автоматическое обнаружение*.
1. Нажмите кнопку **"Добавить все".**  

 ![Добавление URL-адреса](media/create-a-bot/add-url.png)

## Изменение базы знаний

База знаний основана на содержимом документа с часто задаваемыми вопросами и некоторых стандартных ответах. Их можно дополнить парами собственных вопросов и ответов.

1. Разверните левую панель и нажмите кнопку **"Изменить база знаний**". Затем выберите **+** , чтобы добавить новую пару вопросов.
1. **В диалоговом окне "Добавление новой пары** ответов вопросов" в **типе вопроса** и в типе **`Hi``Hello`ответа** нажмите кнопку **"Готово".**
1. Разверните **альтернативные вопросы** и выберите + **Добавить альтернативный вопрос**. Затем введите `Hiya`в качестве альтернативного выражения для "Hello".
1. В верхней части **области пар ответов** на вопросы нажмите кнопку **"Сохранить", чтобы сохранить** база знаний.

## Обучение и тестирование базы знаний

Теперь, когда у вас есть база знаний, ее можно протестировать.

1. В верхней части **области пар ответов** на вопросы выберите **"Тест"**, чтобы проверить база знаний.
1. В области тестирования в нижней части введите сообщение `Hi`. Ответ *Привет* должен быть возвращен.
1. В области тестирования в нижней части введите сообщение `I want to book a flight`. Вы должны увидеть подходящий ответ из базы вопросов и ответов.

    > **Примечание** Он должен включать в себя *короткий ответ*, а также более подробную *форму*: в подробном фрагменте отображается полный текст из документа вопросов и ответов с ответом на наиболее близкий к вашему вопрос, а короткий ответ представляет собой выдержку из этого фрагмента, извлеченную интеллектуальным алгоритмом. Управлять выводом короткого варианта ответа можно с помощью флажка **Отображать короткий ответ** в верхней части области тестирования.

1. Попробуйте еще один вопрос, например `How can I cancel a reservation?`
1. После завершения тестирования база знаний выберите **"Тест**", чтобы закрыть область тестирования.

## Создание бота для базы знаний

База знаний предоставляет серверную службу, которую клиентские приложения могут использовать для ответов на вопросы через тот или иной пользовательский интерфейс. Как правило, такими клиентскими приложениями являются боты. Чтобы база знаний стала доступной для бота, ее необходимо опубликовать как службу, доступную по протоколу HTTP. Затем с помощью Службы Azure Bot можно создать и опубликовать бот, который отвечает на вопросы пользователей с помощью базы знаний.

1. На панели слева выберите **"Развернуть база знаний**".
1. В верхней части страницы выберите **"Развернуть**". Диалоговое окно спросит, хотите ли вы развернуть проект. Выберите **Развернуть**.

 ![Развертывание база знаний.](media/create-a-bot/deploy-knowledge-base.png)

1. После развертывания службы выберите **"Создать бот**". В новой вкладке браузера откроется портал Azure, где вы сможете создать веб-приложение бота в своей подписке Azure.
1. В портал Azure создайте **бот** веб-приложения. (Вы можете увидеть предупреждающее сообщение, чтобы убедиться, что источник шаблона заслуживает доверия. Вам не нужно предпринимать никаких действий в отношении этого сообщения.) Продолжайте обновление следующих параметров:

    - **Сведения о проекте**
        - **Подписка**: *Ваша подписка Azure*.
        - **Группа ресурсов**: *группа ресурсов, в которой содержится ваш языковой ресурс*
    - **Сведения об экземпляре**
        - **Расположение группы ресурсов**: *То же расположение, в котором находится ваша языковая служба*
    - **Служба Azure Bot**
        - **Дескриптор бота**: *Уникальное имя вашего бота* (*предварительно заполнен*)
    - **Выберите ценовую категорию**
        - **Ценовая категория**: бесплатный (F0) (может потребоваться выбрать *Изменить план*)
    - **Идентификатор приложения Майкрософт**
        - **Тип** создания: *выбор **управляемого удостоверения, назначаемого пользователем*** 

5. Нажмите кнопку **"Далее** ", чтобы продолжить обновление параметров. 
    - **Служба приложений**
        - **Имя приложения**: *то же, что и **дескриптор бота** (к этому имени будет автоматически добавлена строка **.azurewebsites.net.**)*
        - **Язык пакета SDK**: *выберите C# или Node.js*
    - **План службы приложений**
        - **Тип** создания: *выберите **"Создать план службы приложений"***
    - **Настройки приложения**
        - **Ключ** ресурса языка: *вам потребуется скопировать ключ ресурса языка и вставить его здесь*:
            - Откройте другую вкладку браузера и перейдите к портал Azure.[https://portal.azure.com](https://portal.azure.com?azure-portal=true)
            - Перейдите к ресурсу службы языка.
            - **На странице "Ключи и конечная точка**" скопируйте один из ключей.
            - Вставьте его здесь.
        - **Имя проекта языка**: MargiesTravel
        - **Имя узла конечной точки языковой службы**: *Предварительно заполнено конечной точкой вашей языковой службы*
    - **Сведения о языковой службе**
        - **Идентификатор подписки**: *Предварительно заполнено вашим идентификатором подписки*
        - **Имя группы ресурсов**: *Предварительно заполнено именем вашей группы ресурсов*
        - **Имя учетной записи**: *Предварительно заполнено именем ресурса*

1. Нажмите кнопку **создания**. Затем дождитесь создания бота (значок уведомления в правом верхнем углу, который выглядит как колокол, будет анимирован во время ожидания). Затем в уведомлении о завершении развертывания выберите **"Перейти к ресурсу**" (или на домашней странице щелкните **группы** ресурсов, откройте группу ресурсов, в которой вы создали бота, и выберите ресурс бота **** Azure).)
1. В левой области бота найдите **Параметры**, выберите тест **в Веб-чат** и дождитесь, пока бот не отобразит сообщение **Hello and Welcome** (может потребоваться несколько секунд для инициализации).
1. С помощью интерфейса чата убедитесь, что бот правильно отвечает на вопросы из базы знаний. Например, попробуйте отправить `I need to cancel my hotel`.

Поэкспериментируйте с ботом. Вероятно, вы увидите, что он точно отвечает на вопросы из базы, но плохо распознает вопросы, ответам на которые не обучен. С помощью Language Studio вы можете отредактировать базу знаний, чтобы улучшить ее, а затем опубликовать повторно.

## Очистка

Если вы не собираетесь выполнять больше упражнений, удалите все ресурсы, которые больше не нужны. Это позволяет избежать каких-либо ненужных затрат.

1. [Откройте портал Azure]( https://portal.azure.com) и выберите группу ресурсов, содержащую созданный ресурс. 
1. Выберите ресурс и нажмите кнопку **"Удалить** ", а затем **"Да** ", чтобы подтвердить. Затем ресурс удаляется.

## Подробнее

- Дополнительные сведения о службе ответов на вопросы см. в [документации](https://docs.microsoft.com/azure/cognitive-services/language-service/question-answering/overview).
- Чтобы узнать больше о службе Microsoft Bot, загляните на [страницу службы Azure Bot](https://azure.microsoft.com/services/bot-service/).
